# Be sure to replace <your_subscription_key> and <your_region> with your actual
# Azure Text-to-Speech API credentials. Also, replace your_book.epub with the
# name of your EPUB file, and audiobook_output with the name of the directory
# where you want to save the output files.

# After creating and saving the `docker-compose.yml` file, run the
# `docker-compose up` command in the same directory to pull the image and start
# the conversion process.

# You can then try to modify volumes to fit your need.

version: '3'
services:
  epub_to_audiobook:
    image: epub_to_audiobook:local
    environment:
      MS_TTS_KEY: <your_subscription_key>
      MS_TTS_REGION: <your_region>
      # Use the internal Docker network to reach kokoro
      OPENAI_BASE_URL: http://kokoro:8880/v1
      OPENAI_API_KEY: fake
    ports:
      - "7860:7860"
    volumes:
      - ./:/app
    command: 'python3 /app_src/main_ui.py --host 0.0.0.0 --port 7860'

  kokoro:
    image: ghcr.io/remsky/kokoro-fastapi-cpu
    ports:
      - "8880:8880"
    # No command needed, uses default
